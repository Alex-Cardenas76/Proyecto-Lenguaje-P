AquÃ­ tienes un **prompt listo**, claro y especÃ­fico, para pedirle a otra IA que **genere el backend completo en C#**, usando la arquitectura y la documentaciÃ³n que ya definimos.

CÃ³pialo y pÃ©galo tal cual:

---

# âœ… **PROMPT PARA GENERAR BACKEND EN C# (N-CAPAS + WPF + SQL SERVER)**

Desarrolla el backend del sistema empresarial **Tech Solutions**, siguiendo estrictamente las indicaciones:

## ğŸ¯ Contexto del Sistema

La empresa *Tech Solutions* comercializa productos tecnolÃ³gicos. El sistema debe permitir:

* GestiÃ³n de usuarios con roles
* GestiÃ³n de clientes
* GestiÃ³n de productos con categorÃ­a y proveedor
* Registro de ventas y detalle de venta
* Control de stock con movimientos (entrada, salida y ajuste)
* GeneraciÃ³n de reportes de ventas
* Seguridad y mantenimiento de datos

## ğŸ› Arquitectura N-Capas (Obligatoria)

Estructura de la soluciÃ³n en C#:

```
TechSolutions.sln
â”‚
â”œâ”€â”€ CapaEntidad          (Modelos / POCO)
â”œâ”€â”€ CapaAccesoDatos      (DAL, ADO.NET, SqlCommand)
â”œâ”€â”€ CapaNegocio          (BLL, Reglas de negocio)
â””â”€â”€ CapaPresentacion     (WPF)   â† No desarrollar UI, solo preparar BLL listo para UI
```

### FunciÃ³n de cada capa:

* **CapaEntidad:** Solo modelos (clases con propiedades).
* **CapaDatos:** Acceso a SQL Server, conexiÃ³n Singleton, mÃ©todos CRUD.
* **CapaNegocio:** LÃ³gica de negocio, validaciones, control de transacciones.
* **CapaPresentacion:** SerÃ¡ implementada luego en WPF (no generar todavÃ­a).

## ğŸ—„ Base de Datos (SQL Server)

Debes basarte en este esquema:

```
Roles
Usuarios
Clientes
Proveedores
Categorias
Productos
TipoMovimiento
TransaccionesStock
Ventas
DetalleVenta
```

### ConexiÃ³n

Usar **Singleton**:

```csharp
public sealed class ConexionBD
{
    private static readonly ConexionBD instancia = new ConexionBD();
    public static ConexionBD Instancia => instancia;
    private ConexionBD() {}
    private readonly string cadenaConexion = "Data Source=.;Initial Catalog=TechSolutionsDB;Integrated Security=True";
    public SqlConnection CrearConexion() => new SqlConnection(cadenaConexion);
}
```

## ğŸ”’ Seguridad

* Las contraseÃ±as deben almacenarse **con hash SHA-256** (no texto plano).
* Incluir clase `PasswordHasher.cs`.

## ğŸ§  Reglas de Negocio Importantes

* Al registrar una venta:

  * Validar stock
  * Insertar venta y detalles
  * Descontar stock por producto
  * Registrar movimiento de stock en TransaccionesStock
  * Todo dentro de una **transacciÃ³n con commit/rollback**

## ğŸ— Lo que debes generar

1. Todas las clases de **Entidad (POCO)**.
2. Clase `ConexionBD.cs` con Singleton.
3. Repositorios DAL:

   * UsuarioDAL.cs
   * ProductoDAL.cs
   * ClienteDAL.cs
   * VentaDAL.cs
4. BLL correspondiente para cada repositorio.
5. `PasswordHasher.cs` implementando SHA-256.
6. CÃ³digo comentado y limpio.
7. Cada mÃ©todo debe estar documentado con **resumen XML**:

```csharp
/// <summary>
/// Registra una nueva venta y descuenta stock.
/// </summary>
```

## ğŸ” Estilo del cÃ³digo

* C# .NET 6+ o superior
* ProgramaciÃ³n estructurada y clara
* No usar Entity Framework, solo **ADO.NET** (`SqlConnection`, `SqlCommand`, `SqlDataReader`)
* No usar servicios externos
* No generar interfaz visual todavÃ­a

---

**Comienza generando primero la CapaEntidad completa.**

DespuÃ©s, espera mi indicaciÃ³n para continuar con DAL â†’ BLL.

---

# âœ… FIN DEL PROMPT

---

Cuando estÃ©s listo, dime:

**Â¿Quieres que ahora generemos el prompt para que otra IA haga la capa de PresentaciÃ³n (WPF con Login y Panel Principal)?**
